{"version":3,"file":"index.js","sources":["../lib/StickyProvider.tsx","../lib/StickyElement.tsx","../lib/ElementResizeObserver.tsx","../lib/StickyPlaceholder.tsx","../lib/utils.ts","../lib/Sticky.tsx","../lib/StickyScrollUp.tsx"],"sourcesContent":["import * as React from 'react';\nimport { ViewportProvider } from 'react-viewport-utils';\n\nimport { IStickyInjectedProps } from './types';\n\nconst StickyGroupContext = React.createContext({\n  stickyOffset: { top: 0, height: 0 },\n  updateStickyOffset: (offset: number, height: number) => {},\n});\n\nexport const connect = () => <P extends object>(\n  WrappedComponent: React.ComponentType<P & IStickyInjectedProps>,\n) => {\n  const ConnectedComponent: React.SFC<P> = props => (\n    <StickyGroupContext.Consumer>\n      {context => (\n        <WrappedComponent\n          {...props}\n          stickyOffset={context.stickyOffset}\n          updateStickyOffset={context.updateStickyOffset}\n        />\n      )}\n    </StickyGroupContext.Consumer>\n  );\n\n  const displayName =\n    WrappedComponent.displayName || WrappedComponent.name || 'Component';\n  ConnectedComponent.displayName = `connectSticky(${displayName})`;\n\n  return ConnectedComponent;\n};\n\nexport default class StickyScrollUpProvider extends React.PureComponent {\n  stickyOffset = {\n    top: 0,\n    height: 0,\n  };\n\n  updateStickyOffset = (stickyOffset: number, height: number) => {\n    this.stickyOffset.top = Math.min(stickyOffset, height);\n    this.stickyOffset.height = height;\n  };\n\n  render() {\n    return (\n      <ViewportProvider experimentalSchedulerEnabled>\n        <StickyGroupContext.Provider\n          value={{\n            updateStickyOffset: this.updateStickyOffset,\n            stickyOffset: this.stickyOffset,\n          }}\n        >\n          {this.props.children}\n        </StickyGroupContext.Provider>\n      </ViewportProvider>\n    );\n  }\n}\n","import * as React from 'react';\nimport { TRenderChildren, IPositionStyles } from './types';\n\ninterface IProps<R> {\n  disabled: boolean;\n  renderArgs?: R;\n  children: TRenderChildren<R>;\n  forwardRef?: React.RefObject<any>;\n  style?: React.CSSProperties;\n  positionStyle?: IPositionStyles;\n}\n\nconst baseStyles: React.CSSProperties = {\n  width: 'inherit',\n};\n\nconst prefixTransform = (transform: string): React.CSSProperties => ({\n  transform,\n  WebkitTransform: transform,\n  msTransform: transform,\n  OTransform: transform,\n});\n\nconst StickyElement = <R extends {}>({\n  children,\n  forwardRef,\n  style: overrideStyles = {},\n  positionStyle = {},\n  disabled,\n  renderArgs,\n  ...props\n}: IProps<R>) => {\n  const style: React.CSSProperties = !disabled\n    ? { ...baseStyles, ...positionStyle, ...overrideStyles }\n    : {};\n\n  if (style.transform) {\n    Object.assign(style, prefixTransform(style.transform));\n  }\n\n  return (\n    <div ref={forwardRef} style={style} {...props}>\n      {typeof children === 'function'\n        ? (children as (options: R) => React.ReactNode)(renderArgs)\n        : children}\n    </div>\n  );\n};\n\nexport default StickyElement;\n","import * as React from 'react';\nimport { IRect } from 'react-viewport-utils';\n\ninterface IElementResizeObserverProps {\n  stickyRef: React.RefObject<any>;\n  onUpdate: (rect: IRect) => void;\n}\n\nclass ElementResizeObserver extends React.PureComponent<\n  IElementResizeObserverProps\n> {\n  private resizeObserver: ResizeObserver | null;\n  constructor(props: IElementResizeObserverProps) {\n    super(props);\n    this.resizeObserver = null;\n  }\n\n  componentDidMount() {\n    this.resetObserver();\n    this.installObserver();\n  }\n\n  componentDidUpdate() {\n    this.resetObserver();\n    this.installObserver();\n  }\n\n  componentWillUnmount() {\n    this.resetObserver();\n  }\n\n  installObserver() {\n    if (!this.props.stickyRef.current) {\n      return;\n    }\n    if (typeof window.ResizeObserver !== 'undefined') {\n      this.resizeObserver = new window.ResizeObserver(entries => {\n        if (entries && entries[0] && entries[0].contentRect) {\n          this.props.onUpdate(entries[0].contentRect);\n        }\n      });\n      this.resizeObserver!.observe(this.props.stickyRef.current);\n    }\n  }\n\n  resetObserver() {\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n      this.resizeObserver = null;\n    }\n  }\n\n  render(): null {\n    return null;\n  }\n}\n\nexport default ElementResizeObserver;\n","import * as React from 'react';\nimport {\n  ObserveViewport,\n  IDimensions,\n  IRect,\n  requestAnimationFrame,\n  cancelAnimationFrame,\n} from 'react-viewport-utils';\nimport ElementResizeObserver from './ElementResizeObserver';\n\ninterface IProps {\n  disableResizing: boolean;\n  disabled: boolean;\n  style: React.CSSProperties | null;\n  stickyRef: React.RefObject<any>;\n  children: (props: { isRecalculating: boolean }) => React.ReactNode;\n  className?: string;\n  forwardRef?: React.RefObject<any>;\n}\n\ninterface IState {\n  isRecalculating: boolean;\n  isWaitingForRecalculation: boolean;\n  stickyHeight: number | null;\n  stickyWidth: number | null;\n  clientHash: string | null;\n}\n\nclass StickyPlaceholder extends React.Component<IProps, IState> {\n  private recalculationTick?: number;\n  private isUnmounted?: boolean;\n  private lastDimensions?: IDimensions;\n  static defaultProps = {\n    style: {},\n  };\n\n  state: IState = {\n    isRecalculating: false,\n    isWaitingForRecalculation: false,\n    stickyHeight: null,\n    stickyWidth: null,\n    clientHash: null,\n  };\n\n  componentWillUnmount() {\n    cancelAnimationFrame(this.recalculationTick);\n    this.isUnmounted = true;\n  }\n\n  calculateSize = () => {\n    if (\n      this.props.stickyRef.current &&\n      !this.state.isRecalculating &&\n      this.state.isWaitingForRecalculation\n    ) {\n      return this.props.stickyRef.current.getBoundingClientRect();\n    }\n    return null;\n  };\n\n  handleDimensionsUpdate = (\n    { dimensions }: { dimensions: IDimensions },\n    stickyRect: IRect | null,\n  ) => {\n    if (this.isUnmounted) {\n      return;\n    }\n    this.lastDimensions = dimensions;\n    const { width, clientWidth } = dimensions;\n    const nextClientHash = [width, clientWidth].join(',');\n\n    if (\n      !this.state.isWaitingForRecalculation &&\n      this.state.clientHash !== nextClientHash\n    ) {\n      this.setState(\n        {\n          clientHash: nextClientHash,\n          isRecalculating: true,\n          isWaitingForRecalculation: true,\n        },\n        () => {\n          if (this.isUnmounted) {\n            return;\n          }\n          this.recalculationTick = requestAnimationFrame(() => {\n            this.setState({\n              isRecalculating: false,\n            });\n            this.recalculationTick = undefined;\n          });\n        },\n      );\n      return;\n    }\n\n    if (stickyRect) {\n      if (\n        this.state.isWaitingForRecalculation ||\n        stickyRect.height !== this.state.stickyHeight ||\n        stickyRect.width !== this.state.stickyWidth\n      ) {\n        this.setState({\n          clientHash: nextClientHash,\n          stickyHeight: stickyRect.height,\n          stickyWidth: stickyRect.width,\n          isWaitingForRecalculation: false,\n        });\n        return;\n      }\n    }\n  };\n\n  handleElementResize = (stickyRect: IRect) => {\n    if (this.lastDimensions) {\n      this.handleDimensionsUpdate(\n        { dimensions: this.lastDimensions },\n        stickyRect,\n      );\n    }\n  };\n\n  render() {\n    const { children, disabled, style, className, forwardRef } = this.props;\n    const {\n      isRecalculating,\n      isWaitingForRecalculation,\n      stickyHeight,\n      stickyWidth,\n    } = this.state;\n    const isActive = !disabled && !isWaitingForRecalculation;\n    const baseStyle = { position: 'relative', ...style } as const;\n    const containerStyle: React.CSSProperties = isActive\n      ? ({\n          height: stickyHeight,\n          width: stickyWidth,\n          ...baseStyle,\n        } as const)\n      : baseStyle;\n    return (\n      <>\n        <div ref={forwardRef} style={containerStyle} className={className}>\n          {children({\n            isRecalculating: isWaitingForRecalculation,\n          })}\n        </div>\n        {!this.props.disableResizing && (\n          <>\n            <ObserveViewport\n              disableScrollUpdates\n              disableDimensionsUpdates={isRecalculating}\n              onUpdate={this.handleDimensionsUpdate}\n              recalculateLayoutBeforeUpdate={this.calculateSize}\n              priority=\"highest\"\n            />\n            <ElementResizeObserver\n              stickyRef={this.props.stickyRef}\n              onUpdate={this.handleElementResize}\n            />\n          </>\n        )}\n      </>\n    );\n  }\n}\n\nexport default StickyPlaceholder;\n","import { IPositionStyles } from './types';\n\nexport const supportsWillChange = (() => {\n  const isBrowser =\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined' &&\n    document.documentElement;\n  if (!isBrowser) {\n    return false;\n  }\n  return 'willChange' in document.documentElement.style;\n})();\n\nexport const supportsPositionSticky = (() => {\n  const isBrowser = typeof window !== 'undefined' && typeof CSS !== 'undefined';\n  if (!isBrowser) {\n    return false;\n  }\n  return CSS.supports ? CSS.supports('position: sticky') : false;\n})();\n\nexport const shallowEqualPositionStyles = (\n  a: IPositionStyles,\n  b: IPositionStyles,\n) => {\n  if (a === b) {\n    return true;\n  }\n  if (a.position !== b.position) {\n    return false;\n  }\n  if (a.top !== b.top) {\n    return false;\n  }\n  if (a.transform !== b.transform) {\n    return false;\n  }\n  if (a.willChange !== b.willChange) {\n    return false;\n  }\n  return true;\n};\n","import * as React from 'react';\nimport {\n  ObserveViewport,\n  IRect,\n  IScroll,\n  IDimensions,\n} from 'react-viewport-utils';\n\nimport { connect as connectStickyProvider } from './StickyProvider';\nimport StickyElement from './StickyElement';\nimport StickyPlaceholder from './StickyPlaceholder';\nimport {\n  TRenderChildren,\n  IStickyComponentProps,\n  IStickyInjectedProps,\n  IPositionStyles,\n} from './types';\nimport {\n  supportsWillChange,\n  shallowEqualPositionStyles,\n  supportsPositionSticky,\n} from './utils';\n\ntype OverflowScrollType = 'flow' | 'end';\n\ninterface IOwnProps extends IStickyComponentProps {\n  /**\n   * The reference to the container to stick into. If this is not set, the component will be sticky regardless how far the user scrolls down.\n   */\n  container?: React.RefObject<any>;\n  /**\n   * The child node that is rendered within the sticky container. When rendered as a function it will add further information the the function which can be used e.g. to update stylings.\n   */\n  children?: TRenderChildren<{\n    isSticky: boolean;\n    isDockedToBottom: boolean;\n    isNearToViewport: boolean;\n    appliedOverflowScroll: OverflowScrollType;\n  }>;\n  /**\n   * Defines how the sticky element should react in case its bigger than the viewport.\n   * Different options are available:\n   * * end: The default value will keep the component sticky as long as it reaches the bottom of its container and only then will scroll down.\n   * * flow: The element scrolls with the flow of the scroll direction, therefore the content is easier to access.\n   */\n  overflowScroll?: OverflowScrollType;\n  /**\n   * A top offset to create a padding between the browser window and the sticky component when sticky.\n   */\n  defaultOffsetTop?: number;\n  /**\n   * Tries to detect when the usage of native `position: sticky` is possible and uses it as long as possible. This is an experimental property and might change in its behavior or disappear in the future.\n   */\n  experimentalNative?: boolean;\n}\n\ninterface IProps extends IOwnProps, IStickyInjectedProps {}\n\ninterface IState {\n  isSticky: boolean;\n  isDockedToBottom: boolean;\n  isNearToViewport: boolean;\n  appliedOverflowScroll: OverflowScrollType;\n  styles: IPositionStyles;\n  useNativeSticky: boolean;\n}\n\ninterface ILayoutSnapshot {\n  stickyRect: IRect;\n  containerRect: IRect;\n}\n\nclass Sticky extends React.PureComponent<IProps, IState> {\n  private stickyRef: React.RefObject<HTMLElement> = React.createRef();\n  private placeholderRef: React.RefObject<HTMLElement> = React.createRef();\n  private nativeStickyThrewOnce: boolean = false;\n\n  static defaultProps = {\n    stickyOffset: { top: 0, height: 0 },\n    defaultOffsetTop: 0,\n    disableResizing: false,\n    disableHardwareAcceleration: false,\n    overflowScroll: 'end' as OverflowScrollType,\n    experimentalNative: false,\n    style: {},\n  };\n\n  state: IState = {\n    isSticky: false,\n    isDockedToBottom: false,\n    isNearToViewport: false,\n    appliedOverflowScroll: 'end',\n    styles: {},\n    useNativeSticky: false,\n  };\n\n  get container() {\n    return this.props.container || this.placeholderRef;\n  }\n\n  get offsetTop() {\n    return this.props.stickyOffset.top + this.props.defaultOffsetTop;\n  }\n\n  hasContainer = () => {\n    return Boolean(this.props.container);\n  };\n\n  isNearToViewport = (rect: IRect): boolean => {\n    const padding = 700;\n    return rect.top - padding < 0 && rect.bottom + padding > 0;\n  };\n\n  getOverflowScrollType = (\n    rectSticky: IRect,\n    dimensions: IDimensions,\n  ): OverflowScrollType => {\n    return this.props.overflowScroll === 'flow' &&\n      this.calcHeightDifference(rectSticky, dimensions) > 0\n      ? 'flow'\n      : 'end';\n  };\n\n  isSticky = (rect: IRect, containerRect: IRect, dimensions: IDimensions) => {\n    if (!this.hasContainer()) {\n      return Math.round(containerRect.top) <= this.offsetTop;\n    }\n\n    if (Math.round(containerRect.top) > this.offsetTop) {\n      return false;\n    }\n\n    const height =\n      this.props.overflowScroll === 'flow'\n        ? Math.min(rect.height, dimensions.height)\n        : rect.height;\n    if (Math.round(containerRect.bottom) - this.offsetTop < height) {\n      return false;\n    }\n\n    return true;\n  };\n\n  shouldUseNativeSticky = (appliedOverflowScroll: OverflowScrollType) => {\n    if (\n      !this.props.experimentalNative ||\n      !supportsPositionSticky ||\n      appliedOverflowScroll !== 'end' ||\n      this.props.stickyOffset.top !== 0\n    ) {\n      return false;\n    }\n\n    if (\n      process.env.NODE_ENV !== 'production' &&\n      !this.nativeStickyThrewOnce &&\n      (this.placeholderRef && this.placeholderRef.current.parentElement) !==\n        (this.props.container && this.props.container.current)\n    ) {\n      console.warn(\n        'react-stickup: a sticky element was used with property `experimentalNative` but its `container` is not the parent the sticky component. As the native sticky implementation always uses its parent element as the container. This can lead to unexpected results. It is therefore recommended to change the DOM structure so that the container is a direct parent of the Sticky component or to remove the `experimentalNative` property.',\n      );\n      this.nativeStickyThrewOnce = true;\n    }\n    return true;\n  };\n\n  isDockedToBottom = (\n    rect: IRect,\n    containerRect: IRect,\n    dimensions: IDimensions,\n  ) => {\n    if (!rect || !containerRect) {\n      return false;\n    }\n\n    if (!this.hasContainer()) {\n      return false;\n    }\n\n    if (rect.height > containerRect.height) {\n      return false;\n    }\n\n    const height =\n      this.props.overflowScroll === 'flow'\n        ? Math.min(rect.height, dimensions.height)\n        : rect.height;\n    if (Math.round(containerRect.bottom) - this.offsetTop >= height) {\n      return false;\n    }\n\n    return true;\n  };\n\n  calcHeightDifference(rectSticky: IRect, dimensions: IDimensions) {\n    if (!dimensions) {\n      return 0;\n    }\n    return Math.max(0, Math.round(rectSticky.height) - dimensions.height);\n  }\n\n  calcOverflowScrollFlowStickyStyles(\n    rectSticky: IRect,\n    containerRect: IRect,\n    scroll: IScroll,\n    dimensions: IDimensions,\n  ): IPositionStyles {\n    const containerTop = Math.round(containerRect.top);\n    const stickyTop = Math.round(rectSticky.top);\n    const scrollY = Math.round(scroll.y);\n    const scrollYTurn = Math.round(scroll.yTurn);\n    const heightDiff = this.calcHeightDifference(rectSticky, dimensions);\n    const containerTopOffset =\n      containerTop + scrollY - this.props.stickyOffset.height;\n    const isStickyBottomReached =\n      Math.round(rectSticky.bottom) <= dimensions.height;\n    const isContainerTopReached = containerTop < this.offsetTop;\n    const isTurnWithinHeightOffset =\n      scrollYTurn - heightDiff <= containerTopOffset;\n    const isTurnPointBeforeContainer = scrollYTurn < containerTopOffset;\n    const isTurnPointAfterContainer =\n      scrollYTurn > containerTopOffset + containerRect.height;\n    const isTurnPointWithinContainer = !(\n      isTurnPointBeforeContainer || isTurnPointAfterContainer\n    );\n    // scroll down AND sticky rect bottom not reached AND turn point not within the container OR\n    // scroll up AND container top not reached OR\n    //scroll up AND turns within the height diff AND turn point not within the container\n    if (\n      (scroll.isScrollingDown &&\n        !isStickyBottomReached &&\n        !isTurnPointWithinContainer) ||\n      (scroll.isScrollingUp && !isContainerTopReached) ||\n      (scroll.isScrollingUp &&\n        isTurnWithinHeightOffset &&\n        !isTurnPointWithinContainer)\n    ) {\n      return {\n        position: 'absolute',\n        top: 0,\n      };\n    }\n\n    // scroll down AND sticky bottom reached\n    if (scroll.isScrollingDown && isStickyBottomReached) {\n      return {\n        position: 'fixed',\n        top: -heightDiff,\n      };\n    }\n\n    const isStickyTopReached = stickyTop >= this.offsetTop;\n    // scroll down AND turn point within container OR\n    // scroll up AND turn point not before container AND not sticky top reached\n    if (\n      (scroll.isScrollingDown && isTurnPointWithinContainer) ||\n      (scroll.isScrollingUp &&\n        !isTurnPointBeforeContainer &&\n        !isStickyTopReached)\n    ) {\n      return {\n        position: 'absolute',\n        top: Math.abs(scrollY - stickyTop + (containerTop - scrollY)),\n      };\n    }\n\n    return {\n      position: 'fixed',\n      top: this.offsetTop,\n    };\n  }\n\n  calcPositionStyles(\n    rectSticky: IRect,\n    containerRect: IRect,\n    scroll: IScroll,\n    dimensions: IDimensions,\n  ): IPositionStyles {\n    if (this.isSticky(rectSticky, containerRect, dimensions)) {\n      if (this.getOverflowScrollType(rectSticky, dimensions) === 'flow') {\n        return this.calcOverflowScrollFlowStickyStyles(\n          rectSticky,\n          containerRect,\n          scroll,\n          dimensions,\n        );\n      }\n      const stickyOffset = this.props.stickyOffset.top;\n      const stickyHeight = this.props.stickyOffset.height;\n      const headIsFlexible = stickyOffset > 0 && stickyOffset < stickyHeight;\n      if (headIsFlexible) {\n        const relYTurn =\n          Math.round(scroll.yTurn - scroll.y + scroll.yDTurn) -\n          Math.round(containerRect.top);\n        return {\n          position: 'absolute',\n          top: relYTurn + this.offsetTop,\n        };\n      }\n\n      return {\n        position: 'fixed',\n        top: this.offsetTop,\n      };\n    }\n\n    if (this.isDockedToBottom(rectSticky, containerRect, dimensions)) {\n      return {\n        position: 'absolute',\n        top: containerRect.height - rectSticky.height,\n      };\n    }\n\n    return {\n      position: 'absolute',\n      top: 0,\n    };\n  }\n\n  getStickyStyles(\n    rect: IRect,\n    containerRect: IRect,\n    scroll: IScroll,\n    dimensions: IDimensions,\n  ): IPositionStyles {\n    const styles = this.calcPositionStyles(\n      rect,\n      containerRect,\n      scroll,\n      dimensions,\n    );\n\n    if (!this.props.disableHardwareAcceleration) {\n      const shouldAccelerate = this.isNearToViewport(rect);\n      if (supportsWillChange) {\n        styles.willChange = shouldAccelerate ? 'position, top' : null;\n      } else {\n        styles.transform = shouldAccelerate ? `translateZ(0)` : null;\n      }\n    }\n\n    return styles;\n  }\n\n  recalculateLayoutBeforeUpdate = (): ILayoutSnapshot => {\n    const containerRect = this.container.current.getBoundingClientRect();\n    const stickyRect = this.stickyRef.current.getBoundingClientRect();\n    return {\n      stickyRect,\n      containerRect,\n    };\n  };\n\n  handleScrollUpdate = (\n    { scroll, dimensions }: { scroll: IScroll; dimensions: IDimensions },\n    { stickyRect, containerRect }: ILayoutSnapshot,\n  ) => {\n    if (this.props.disabled) {\n      return;\n    }\n    // in case children is not a function renderArgs will never be used\n    const willRenderAsAFunction = typeof this.props.children === 'function';\n    const appliedOverflowScroll = this.getOverflowScrollType(\n      stickyRect,\n      dimensions,\n    );\n\n    const useNativeSticky = this.shouldUseNativeSticky(appliedOverflowScroll);\n\n    const styles = useNativeSticky\n      ? {}\n      : this.getStickyStyles(stickyRect, containerRect, scroll, dimensions);\n    const stateStyles = this.state.styles;\n    const stylesDidChange = !shallowEqualPositionStyles(styles, stateStyles);\n    const isSticky = willRenderAsAFunction\n      ? this.isSticky(stickyRect, containerRect, dimensions)\n      : false;\n    const isDockedToBottom = willRenderAsAFunction\n      ? this.isDockedToBottom(stickyRect, containerRect, dimensions)\n      : false;\n    const isNearToViewport = this.isNearToViewport(stickyRect);\n    const useNativeStickyDidChange =\n      this.state.useNativeSticky !== useNativeSticky;\n    const isStickyDidChange = this.state.isSticky !== isSticky;\n    const isDockedToBottomDidChange =\n      this.state.isDockedToBottom !== isDockedToBottom;\n    const isNearToViewportDidChange =\n      this.state.isNearToViewport !== isNearToViewport;\n    const appliedOverflowScrollDidChange =\n      appliedOverflowScroll !== this.state.appliedOverflowScroll;\n\n    if (\n      !useNativeStickyDidChange &&\n      !stylesDidChange &&\n      !isStickyDidChange &&\n      !isDockedToBottomDidChange &&\n      !isNearToViewportDidChange &&\n      !appliedOverflowScrollDidChange\n    ) {\n      return;\n    }\n\n    this.setState({\n      useNativeSticky,\n      isSticky,\n      isDockedToBottom,\n      isNearToViewport,\n      appliedOverflowScroll,\n      styles: stylesDidChange ? styles : stateStyles,\n    });\n  };\n\n  renderSticky = ({ isRecalculating }: { isRecalculating: boolean }) => {\n    const { children, disabled, stickyProps } = this.props;\n    return (\n      <StickyElement<\n        TRenderChildren<{\n          isSticky: boolean;\n          isDockedToBottom: boolean;\n          isNearToViewport: boolean;\n          appliedOverflowScroll: OverflowScrollType;\n        }>\n      >\n        forwardRef={this.stickyRef}\n        positionStyle={this.state.styles}\n        disabled={disabled || isRecalculating}\n        children={children}\n        renderArgs={{\n          isSticky: this.state.isSticky,\n          isDockedToBottom: this.state.isDockedToBottom,\n          isNearToViewport: this.state.isNearToViewport,\n          appliedOverflowScroll: this.state.appliedOverflowScroll,\n        }}\n        {...stickyProps}\n      />\n    );\n  };\n\n  render() {\n    const {\n      disabled,\n      disableResizing,\n      style,\n      className,\n      overflowScroll,\n    } = this.props;\n    return (\n      <>\n        <StickyPlaceholder\n          className={className}\n          style={\n            this.state.useNativeSticky\n              ? {\n                  position: 'sticky',\n                  top: this.props.defaultOffsetTop,\n                  ...style,\n                }\n              : style\n          }\n          disabled={disabled}\n          forwardRef={this.placeholderRef}\n          stickyRef={this.stickyRef}\n          disableResizing={disableResizing}\n        >\n          {this.renderSticky}\n        </StickyPlaceholder>\n        <ObserveViewport\n          disableScrollUpdates={disabled}\n          disableDimensionsUpdates={disabled || overflowScroll !== 'flow'}\n          onUpdate={this.handleScrollUpdate}\n          recalculateLayoutBeforeUpdate={this.recalculateLayoutBeforeUpdate}\n          priority={this.state.isNearToViewport ? 'highest' : 'low'}\n        />\n      </>\n    );\n  }\n}\n\nexport default connectStickyProvider()<IOwnProps>(Sticky);\n","import * as React from 'react';\nimport { ObserveViewport, IRect, IScroll } from 'react-viewport-utils';\n\nimport { connect as connectStickyProvider } from './StickyProvider';\nimport StickyElement from './StickyElement';\nimport StickyPlaceholder from './StickyPlaceholder';\nimport {\n  TRenderChildren,\n  IStickyComponentProps,\n  IStickyInjectedProps,\n  IPositionStyles,\n} from './types';\nimport { supportsWillChange, shallowEqualPositionStyles } from './utils';\n\ninterface IOwnProps extends IStickyComponentProps {\n  /**\n   * The child node that is rendered within the sticky container. When rendered as a function it will add further information the the function which can be used e.g. to update stylings.\n   */\n  children?: TRenderChildren<{\n    isNearToViewport: boolean;\n    isSticky: boolean;\n  }>;\n  /**\n   * When not initialized as the first element within the page (directly at the top) this allows to set an offset by hand from where the component will be sticky.\n   * @deprecated If not set, the start position is now calculated by default as it was already the case for the `Sticky` component. As there is no use case for this property anymore it will be removed in the future.\n   */\n  defaultOffsetTop?: number;\n}\n\ninterface IProps extends IOwnProps, IStickyInjectedProps {}\n\ninterface IState {\n  styles: IPositionStyles;\n  isNearToViewport: boolean;\n  isSticky: boolean;\n}\n\nconst calcPositionStyles = (\n  rect: IRect,\n  scroll: IScroll,\n  { offsetTop = 0 },\n): IPositionStyles => {\n  const rectTop = Math.round(rect.top);\n  const scrollY = Math.round(scroll.y);\n  if (scroll.isScrollingDown) {\n    // disable sticky mode above the top offset while scrolling down\n    if (rectTop > 0 && scrollY < offsetTop) {\n      return {\n        position: 'absolute',\n        top: 0,\n      };\n    }\n\n    // element is visible and scrolls down\n    return {\n      position: 'absolute',\n      top: Math.max(scrollY - offsetTop + rectTop, 0),\n    };\n  }\n\n  const isTopVisible = rectTop >= 0;\n  const isBottomVisible = rectTop + rect.height <= 0;\n  // element is visible and scrolls up\n  if (!isTopVisible && !isBottomVisible) {\n    return {\n      position: 'absolute',\n      top: scrollY - offsetTop + rectTop,\n    };\n  }\n\n  // disable sticky mode above the top offset while scrolling up\n  if (scrollY <= offsetTop) {\n    return {\n      position: 'absolute',\n      top: 0,\n    };\n  }\n\n  if (Math.round(scroll.yDTurn) === 0) {\n    // scroll direction changed from down to up and the element was not visible\n    if (isBottomVisible) {\n      return {\n        position: 'absolute',\n        top: Math.round(scroll.yTurn) - offsetTop - rect.height,\n      };\n    }\n    // scroll direction changed from down to up and the element was fully visible\n    return {\n      position: 'absolute',\n      top: Math.max(scrollY - offsetTop, 0),\n    };\n  }\n\n  // set sticky\n  return {\n    position: 'fixed',\n    top: 0,\n  };\n};\n\nclass StickyScrollUp extends React.PureComponent<IProps, IState> {\n  private stickyRef: React.RefObject<any> = React.createRef();\n  private placeholderRef: React.RefObject<any> = React.createRef();\n  private stickyOffset: number | null = null;\n  private stickyOffsetHeight: number = 0;\n\n  static defaultProps = {\n    disableHardwareAcceleration: false,\n    disableResizing: false,\n    style: {},\n  };\n\n  state: IState = {\n    styles: {},\n    isNearToViewport: false,\n    isSticky: false,\n  };\n\n  componentDidUpdate(prevProps: IProps, prevState: IState) {\n    if (\n      this.props.updateStickyOffset &&\n      prevProps.disabled !== this.props.disabled\n    ) {\n      this.props.updateStickyOffset(\n        this.props.disabled ? 0 : this.stickyOffset,\n        this.stickyOffsetHeight,\n      );\n    }\n  }\n\n  isNearToViewport = (rect: IRect): boolean => {\n    const padding = 700;\n    return rect.top - padding < 0;\n  };\n\n  getStickyStyles(stickyRect: IRect, placeholderRect: IRect, scroll: IScroll) {\n    const offsetTop = isNaN(this.props.defaultOffsetTop)\n      ? Math.round(placeholderRect.top) + Math.round(scroll.y)\n      : this.props.defaultOffsetTop;\n    const styles = calcPositionStyles(stickyRect, scroll, {\n      offsetTop,\n    });\n\n    if (!this.props.disableHardwareAcceleration) {\n      const shouldAccelerate = this.isNearToViewport(stickyRect);\n      if (supportsWillChange) {\n        styles.willChange = shouldAccelerate ? 'position, top' : null;\n      } else {\n        styles.transform = shouldAccelerate ? `translateZ(0)` : null;\n      }\n    }\n\n    return styles;\n  }\n\n  recalculateLayoutBeforeUpdate = (): {\n    stickyRect: IRect;\n    placeholderRect: IRect;\n  } => {\n    return {\n      placeholderRect: this.placeholderRef.current.getBoundingClientRect(),\n      stickyRect: this.stickyRef.current.getBoundingClientRect(),\n    };\n  };\n\n  handleViewportUpdate = (\n    { scroll }: { scroll: IScroll },\n    {\n      stickyRect,\n      placeholderRect,\n    }: { stickyRect: IRect; placeholderRect: IRect },\n  ) => {\n    if (this.props.disabled) {\n      return;\n    }\n    // in case children is not a function renderArgs will never be used\n    const willRenderAsAFunction = typeof this.props.children === 'function';\n\n    const nextOffset = Math.max(Math.round(stickyRect.bottom), 0);\n    const nextOffsetHeight = stickyRect.height;\n    const offsetDidChange = this.stickyOffset !== nextOffset;\n    const offsetHeightDidChange = this.stickyOffsetHeight !== nextOffsetHeight;\n\n    const styles = this.getStickyStyles(stickyRect, placeholderRect, scroll);\n    const stateStyles = this.state.styles;\n    const stylesDidChange = !shallowEqualPositionStyles(styles, stateStyles);\n    const isNearToViewport = this.isNearToViewport(stickyRect);\n    const isSticky = willRenderAsAFunction\n      ? styles.top === 0 && styles.position === 'fixed'\n      : false;\n    const isNearToViewportDidChange =\n      this.state.isNearToViewport !== isNearToViewport;\n    const isStickyDidChange = this.state.isSticky !== isSticky;\n\n    if (\n      this.props.updateStickyOffset &&\n      (offsetDidChange || offsetHeightDidChange)\n    ) {\n      this.props.updateStickyOffset(nextOffset, nextOffsetHeight);\n    }\n\n    if (!stylesDidChange && !isNearToViewportDidChange && !isStickyDidChange) {\n      return;\n    }\n\n    this.setState({\n      styles: stylesDidChange ? styles : stateStyles,\n      isNearToViewport,\n      isSticky,\n    });\n  };\n\n  renderSticky = ({ isRecalculating }: { isRecalculating: boolean }) => {\n    const { disabled, children, stickyProps } = this.props;\n    return (\n      <StickyElement<\n        TRenderChildren<{\n          isNearToViewport: boolean;\n          isSticky: boolean;\n        }>\n      >\n        forwardRef={this.stickyRef}\n        positionStyle={this.state.styles}\n        disabled={disabled || isRecalculating}\n        children={children}\n        renderArgs={{\n          isNearToViewport: this.state.isNearToViewport,\n          isSticky: this.state.isSticky,\n        }}\n        {...stickyProps}\n      />\n    );\n  };\n\n  render() {\n    const { disabled, disableResizing, style, className } = this.props;\n    return (\n      <>\n        <StickyPlaceholder\n          className={className}\n          style={style}\n          disabled={disabled}\n          stickyRef={this.stickyRef}\n          disableResizing={disableResizing}\n          forwardRef={this.placeholderRef}\n        >\n          {this.renderSticky}\n        </StickyPlaceholder>\n        <ObserveViewport\n          disableScrollUpdates={disabled}\n          disableDimensionsUpdates\n          onUpdate={this.handleViewportUpdate}\n          recalculateLayoutBeforeUpdate={this.recalculateLayoutBeforeUpdate}\n          priority={this.state.isNearToViewport ? 'highest' : 'low'}\n        />\n      </>\n    );\n  }\n}\n\nexport default connectStickyProvider()<IOwnProps>(StickyScrollUp);\n"],"names":["React.createContext","React.createElement","ViewportProvider","React.PureComponent","requestAnimationFrame","cancelAnimationFrame","ObserveViewport","React.Component","React.createRef","connectStickyProvider"],"mappings":"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"}